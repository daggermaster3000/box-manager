.grid-wrapper {
    padding: 1rem;
    border-radius: 12px;
    overflow: auto;
    max-width: 100%;
    width: 100%;
    background: rgba(0, 0, 0, 0.2);
    -webkit-overflow-scrolling: touch;
    touch-action: pan-x pan-y;
    overscroll-behavior: contain;
}

@media (max-width: 768px) {
    .grid-wrapper {
        max-height: 450px;
    }
}

@media (min-width: 769px) {
    .grid-wrapper {
        max-height: calc(100vh - 200px);
    }
}

.grid-container {
    display: grid;
    gap: 2px;
    min-width: 800px;
    /* Increased to ensure scrolling is always possible/needed on mobile */
    background: var(--grid-line);
}

@media (max-width: 768px) {
    .grid-container {
        min-width: 600px;
        /* Still wider than most phones */
    }
}

@media (max-width: 480px) {
    .grid-container {
        min-width: 350px;
    }
}

.grid-cell {
    background: rgba(20, 20, 23, 0.4);
    aspect-ratio: 1;
    border-radius: 2px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
    transition: background 0.2s ease;
    min-width: 20px;
    padding: 2px;
}

.grid-cell:hover {
    background: rgba(255, 255, 255, 0.1);
}

.grid-cell.selected {
    outline: 2px solid var(--accent-cyan);
    background: var(--accent-cyan-glow);
    z-index: 2;
}

.grid-cell.sample {
    background: var(--accent-emerald-glow);
}

.grid-cell.sample .cell-indicator {
    width: 60%;
    height: 60%;
    background: var(--accent-emerald);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--accent-emerald);
}

.cell-visual-wrapper {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    min-height: 0;
    margin-bottom: 2px;
}

.cell-icon-image {
    max-width: 85%;
    max-height: 85%;
    object-fit: contain;
    filter: drop-shadow(0 0 4px currentColor);
}

.grid-cell.control {
    background: rgba(168, 85, 247, 0.2);
}

.grid-cell.control .cell-indicator {
    width: 60%;
    height: 60%;
    background: #a855f7;
    border-radius: 50%;
    box-shadow: 0 0 8px #a855f7;
}

.grid-cell.primers {
    background: var(--accent-cyan-glow);
}

.grid-cell.primers .cell-indicator {
    width: 60%;
    height: 60%;
    background: var(--accent-cyan);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--accent-cyan);
}

.grid-cell.plasmid {
    background: rgba(234, 179, 8, 0.2);
}

.grid-cell.plasmid .cell-indicator {
    width: 60%;
    height: 60%;
    background: #eab308;
    border-radius: 50%;
    box-shadow: 0 0 8px #eab308;
}

.grid-cell.antibody {
    background: rgba(139, 92, 246, 0.2);
}

.grid-cell.antibody .cell-indicator {
    width: 60%;
    height: 60%;
    background: #8b5cf6;
    border-radius: 50%;
    box-shadow: 0 0 8px #8b5cf6;
}

.grid-cell.reagent {
    background: rgba(244, 63, 94, 0.2);
}

.grid-cell.reagent .cell-indicator {
    width: 60%;
    height: 60%;
    background: #f43f5e;
    border-radius: 50%;
    box-shadow: 0 0 8px #f43f5e;
}

.grid-cell.aliquot {
    background: rgba(6, 182, 212, 0.2);
}

.grid-cell.aliquot .cell-indicator {
    width: 60%;
    height: 60%;
    background: var(--accent-cyan);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--accent-cyan);
}

.cell-name {
    font-size: 0.8rem;
    /* Increased from 0.5rem */
    font-weight: 800;
    color: var(--text-primary);
    text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);
    /* Better contrast */
    text-align: center;
    max-width: 90%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    z-index: 2;
    pointer-events: none;
    line-height: 1.1;
    margin-bottom: 4px;
}

.cell-label {
    font-size: 0.5rem;
    color: var(--text-secondary);
    position: absolute;
    bottom: 1px;
    right: 1px;
    pointer-events: none;
    font-family: var(--font-mono);
}

.grid-cell.empty {
    opacity: 0.5;
}